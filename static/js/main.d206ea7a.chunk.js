(this["webpackJsonptfjs-yolov5"]=this["webpackJsonptfjs-yolov5"]||[]).push([[0],{275:function(e,t,n){},277:function(e,t,n){},282:function(e,t){},283:function(e,t){},291:function(e,t){},301:function(e,t){},302:function(e,t){},303:function(e,t){},304:function(e,t){},312:function(e,t){},314:function(e,t,n){"use strict";n.r(t);var o=n(80),r=n.n(o),a=n(246),i=n.n(a),c=(n(275),n(11)),s=n(4),l=n(5),u=n.n(l),d=(n(277),n(91)),f=n(269),b=n.n(f),h=n(90),p={height:1080,width:1920,maxWidth:"100vw",facingMode:"environment"},v=["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush"];var g=function(){var e=Object(o.useRef)(null),t=Object(o.useState)(null),n=Object(s.a)(t,2),r=(n[0],n[1]),a=Object(o.useState)(960),i=Object(s.a)(a,2),l=i[0],f=(i[1],Object(o.useState)(640)),g=Object(s.a)(f,2),j=g[0],y=(g[1],function(){var e=Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.e("yolov5n/model.json");case 2:return t=e.sent,r(t),console.log("Model loaded."),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),m=function(){var t=Object(c.a)(u.a.mark((function t(n){var o,r,a,i,c,l,f,b,h,p,g;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"undefined"!==typeof e.current&&null!==e.current&&4===e.current.video.readyState&&null!==n&&(o=e.current.video,r=o.videoWidth,a=o.videoHeight,e.current.video.width=r,e.current.video.height=a,(i=document.getElementById("myCanvas")).width=r,i.height=a,(c=i.getContext("2d")).clearRect(0,0,e.current.video.videoWidth,e.current.video.videoHeight),l=d.a.fromPixels(o),f=n.inputs[0].shape.slice(1,3),b=Object(s.a)(f,2),h=b[0],p=b[1],g=d.g((function(){return d.d.resizeBilinear(l,[h,p]).div(255).expandDims(0)})),performance.now(),n.executeAsync(g).then((function(e){var t="16px sans-serif";c.font=t,c.textBaseline="top";var n,o=Object(s.a)(e,4),i=o[0],l=o[1],u=o[2],d=o[3],f=i.dataSync(),b=l.dataSync(),h=u.dataSync(),p=d.dataSync()[0];for(n=0;n<p;++n){var g=f.slice(4*n,4*(n+1)),j=Object(s.a)(g,4),y=j[0],m=j[1],x=j[2],k=j[3],O=(x*=r)-(y*=r),w=(k*=a)-(m*=a),F=v[h[n]],S=b[n].toFixed(2);c.strokeStyle="#00FFFF",c.lineWidth=4,c.strokeRect(y,m,O,w),c.fillStyle="#00FFFF";var C=c.measureText(F+":"+S).width,I=parseInt(t,10);c.fillRect(y,m,C+4,I+4)}for(n=0;n<p;++n){var z=f.slice(4*n,4*(n+1)),B=Object(s.a)(z,3),T=B[0],R=B[1];T*=r,R*=a;var W=v[h[n]],E=b[n].toFixed(2);c.fillStyle="#000000",c.fillText(W+":"+E,T,R)}performance.now();return e})).then((function(e){for(var t=0,n=e.length;t<n;)d.b(e[t]),t++})).finally((function(){d.b(l),d.b(g)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){d.f().then((function(e){d.c(),console.log("tfjs is ready")})).then(y).then((function(e){console.log("Test model is loaded"),setInterval(m,333,e)}))}),[]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("div",{style:{position:"absolute",top:"0px",zIndex:"9999"},children:Object(h.jsx)("canvas",{id:"myCanvas",width:l,height:j,style:{backgroundColor:"transparent"}})}),Object(h.jsx)("div",{style:{position:"absolute",top:"0px"},children:Object(h.jsx)(b.a,{audio:!1,id:"img",ref:e,screenshotQuality:1,screenshotFormat:"image/jpeg",videoConstraints:p})})]})},j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,315)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),o(e),r(e),a(e),i(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root")),j()}},[[314,1,2]]]);
//# sourceMappingURL=main.d206ea7a.chunk.js.map